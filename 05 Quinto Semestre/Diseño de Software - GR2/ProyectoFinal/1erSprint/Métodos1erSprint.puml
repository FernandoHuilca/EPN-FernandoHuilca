@startuml
class Ejercicio {
  - tipo: TipoEjercicio
  - enunciado: Text
  - solucion: String
  - dificultad: Dificultad
  - puntos: int
  - intentosPermitidos: int
  - tiempoEstimado: int
  
  + cargarInstrucciones(): String
  + verificarRespuesta(respuesta: Respuesta): Resultado
  + generarRetroalimentacion(resultado: Resultado): String
  + pausarEjercicio(): boolean
  + reanudarEjercicio(): boolean
  + permitirReintento(): boolean
}

class Respuesta {
  - contenido: String
  - fechaHora: DateTime
  - tiempoUtilizado: int
  - estadoEvaluacion: EstadoEvaluacion
  
  + registrarContenido(contenido: String)
  + calcularTiempoUtilizado(): int
  + cambiarEstado(estado: EstadoEvaluacion)
}

class Resultado {
  - puntuacion: int
  - esCorrecto: boolean
  - tiempoTotal: int
  - erroresCount: int
  
  + calcularPuntuacion(): int
  + determinarCorreccion(): boolean
  + contarErrores(): int
  + generarDiagnostico(): Diagnóstico
}

class Diagnóstico {
  - tipoError: TipoError
  - descripcion: String
  - ubicacionError: String
  - sugerencias: String[]
  
  + identificarTipoError(): TipoError
  + ubicarError(): String
  + generarSugerencias(): String[]
  + mostrarPista(nivel: int): String
  + mostrarSolucion(): String
}

class MotorEvaluación {
  - version: String
  - lenguajesSoportados: String[]
  - configuracion: Map<String, String>
  
  + evaluarCodigo(codigo: String): Resultado
  + evaluarOpcionMultiple(opciones: String[]): Resultado
  + configurarParametros(config: Map<String, String>)
  + verificarConexion(): boolean
}

class MotorRetroalimentación {
  - plantillas: Map<TipoEjercicio, String>
  - nivelDetalle: int
  - idioma: String
  - estrategia: TipoRetroalimentacion
  
  + generarMensaje(resultado: Resultado): String
  + personalizarRetroalimentacion(nivel: int): String
  + cambiarEstrategia(estrategia: TipoRetroalimentacion)
}

class ColaEvaluación {
  - fechaCreacion: DateTime
  - estado: EstadoCola
  - reintentos: int
  - maxIntentos: int
  - intervaloReintento: int
  
  + encolarRespuesta(respuesta: Respuesta)
  + procesarSiguiente(): Respuesta
  + reintentarEvaluacion()
  + verificarEstado(): EstadoCola
  + monitorearConexion(): boolean
}

' Enums (igual que antes)
@enduml